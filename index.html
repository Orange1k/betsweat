<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Texas Hold'em Odds Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #eef2f3;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      color: #2b6cb0;
    }

    .section {
      margin-bottom: 20px;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(13, 1fr);
      gap: 4px;
    }

    .card-button {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      text-align: center;
      font-size: 14px;
      background: #f1f1f1;
    }

    .card-button.selected {
      background: #2b6cb0;
      color: white;
    }

    .card-button.disabled {
      background: #ccc;
      pointer-events: none;
    }

    .hand-display {
      margin-top: 10px;
    }

    .card {
      display: inline-block;
      margin: 4px;
      padding: 6px 10px;
      font-size: 18px;
      border-radius: 6px;
      border: 1px solid #aaa;
    }

    .red {
      color: red;
    }

    .black {
      color: black;
    }

    .odds {
      font-size: 32px;
      text-align: center;
      color: #2b6cb0;
      margin-top: 20px;
    }

    button {
      padding: 10px 20px;
      background-color: #2b6cb0;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }

    button.reset {
      background-color: #e53e3e;
      width: 100%;
    }

    .player-controls {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    .player-count {
      font-size: 20px;
      width: 40px;
      text-align: center;
    }

    .arrow-button {
      width: 30px;
      height: 30px;
      font-size: 20px;
      border-radius: 4px;
      border: none;
      background: #ddd;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Texas Hold'em Odds Calculator</h1>

    <div class="section">
      <h2>Your Hole Cards</h2>
      <div id="holeCards" class="hand-display"></div>
    </div>

    <div class="section">
      <h2>Community Cards</h2>
      <div id="communityCards" class="hand-display"></div>
    </div>

    <div class="section">
      <h3>Select a Card</h3>
      <div id="cardSelector" class="card-grid"></div>
    </div>

    <div class="section">
      <h3>Number of Players</h3>
      <div class="player-controls">
        <button class="arrow-button" onclick="changePlayerCount(-1)">−</button>
        <div id="playerCountDisplay" class="player-count">8</div>
        <button class="arrow-button" onclick="changePlayerCount(1)">+</button>
      </div>
    </div>

    <div class="odds" id="odds">Winning Odds: 0.0%</div>

    <button class="reset" onclick="resetAll()">Reset</button>
  </div>

  <script>
    const RANKS = ['2','3','4','5','6','7','8','9','T','J','Q','K','A'];
    const SUITS = ['h','d','c','s'];
    const SUIT_SYMBOLS = { h:'♥', d:'♦', c:'♣', s:'♠' };
    const SUIT_COLORS = { h:'red', d:'red', c:'black', s:'black' };

    let selectedCards = [];
    let holeCards = [];
    let communityCards = [];
    let playerCount = 8;

    function renderCardSelector() {
      const container = document.getElementById('cardSelector');
      container.innerHTML = '';

      for (let suit of SUITS) {
        for (let rank of RANKS) {
          const card = rank + suit;
          const btn = document.createElement('div');
          btn.className = 'card-button';
          btn.textContent = rank + SUIT_SYMBOLS[suit];
          btn.classList.add(SUIT_COLORS[suit]);

          if (selectedCards.includes(card)) {
            btn.classList.add('disabled');
          }

          btn.onclick = () => selectCard(rank, suit, btn);
          container.appendChild(btn);
        }
      }
    }

    function selectCard(rank, suit) {
      const cardStr = rank + suit;
      if (selectedCards.includes(cardStr)) return;

      selectedCards.push(cardStr);
      const card = { rank, suit };

      if (holeCards.length < 2) {
        holeCards.push(card);
      } else if (communityCards.length < 5) {
        communityCards.push(card);
      }

      updateDisplay();
      renderCardSelector();

      const totalCards = holeCards.length + communityCards.length;
      if (
        (holeCards.length === 2 && totalCards <= 2) ||
        (totalCards >= 3 && totalCards <= 7)
      ) {
        calculateOdds();
      }
    }

    function updateDisplay() {
      const makeCard = (card) =>
        `<div class="card ${SUIT_COLORS[card.suit]}">${card.rank}${SUIT_SYMBOLS[card.suit]}</div>`;

      document.getElementById('holeCards').innerHTML = holeCards
        .map(makeCard)
        .join('');
      document.getElementById('communityCards').innerHTML = communityCards
        .map(makeCard)
        .join('');

      document.getElementById('playerCountDisplay').textContent = playerCount;
    }

    function resetAll() {
      holeCards = [];
      communityCards = [];
      selectedCards = [];
      updateDisplay();
      renderCardSelector();
      document.getElementById('odds').textContent = 'Winning Odds: 0.0%';
    }

    function changePlayerCount(change) {
      playerCount = Math.max(1, Math.min(8, playerCount + change));
      updateDisplay();
      if (holeCards.length === 2) calculateOdds();
    }

    function getDeck() {
      const deck = [];
      for (let suit of SUITS) {
        for (let rank of RANKS) {
          const cardStr = rank + suit;
          if (!selectedCards.includes(cardStr)) {
            deck.push({ rank, suit });
          }
        }
      }
      return deck;
    }

    function calculateOdds() {
      if (holeCards.length < 2) return;

      const simulations = 200;
      let wins = 0;

      for (let i = 0; i < simulations; i++) {
        if (simulateHand(playerCount)) wins++;
      }

      const winPercent = (wins / simulations * 100).toFixed(1);
      document.getElementById('odds').textContent = `Winning Odds: ${winPercent}%`;
    }

    function simulateHand(players) {
      let deck = getDeck();
      deck.sort(() => Math.random() - 0.5);

      const simCommunity = [...communityCards];
      while (simCommunity.length < 5) {
        simCommunity.push(deck.pop());
      }

      const opponents = [];
      for (let i = 0; i < players - 1; i++) {
        opponents.push([deck.pop(), deck.pop()]);
      }

      const playerScore = rankHand(holeCards, simCommunity);
      for (let opp of opponents) {
        if (rankHand(opp, simCommunity) > playerScore) return false;
      }

      return true;
    }

    function rankHand(hole, board) {
      const all = [...hole, ...board];
      const rankCount = {};
     
