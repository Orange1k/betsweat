<!-- find and replace these in your HTML -->

<!-- 1. change label in #results -->
<div id="results">
  <span id="oddsText">Waiting for input...</span><br><br>
  Players Left: <span id="playerCountDisplay">8</span>
  <div class="counter-controls">
    <button class="counter-btn" onclick="changePlayerCount(1)">▲</button>
    <button class="counter-btn" onclick="changePlayerCount(-1)">▼</button>
  </div>
  <button class="reset-btn" onclick="resetAll()">Reset</button>
</div>

<!-- 2. replace related JavaScript -->
<script>
let selectedCards = [];
let playerCount = 8;

function changePlayerCount(delta) {
  playerCount = Math.max(2, Math.min(8, playerCount + delta)); // min = 2 players (user + 1 opp)
  playerCountDisplay.textContent = playerCount;
  calculateOdds();
}

function resetAll() {
  selectedCards = [];
  playerCount = 8;
  playerCountDisplay.textContent = playerCount;
  oddsText.textContent = "Waiting for input...";
  updateVisuals();
}

function calculateOdds() {
  if (selectedCards.length < 2) {
    oddsText.textContent = "Select at least 2 cards.";
    return;
  }

  const total = 1000;
  let wins = 0, ties = 0;
  const opponents = playerCount - 1;

  for (let i = 0; i < total; i++) {
    const deck = getDeck().slice();
    shuffle(deck);
    const playerHand = selectedCards.slice(0,2);
    const knownCommunity = selectedCards.slice(2);
    const community = [...knownCommunity];

    while (community.length < 5) community.push(deck.pop());

    const player7 = playerHand.concat(community);
    const playerScore = evaluateHand(player7);

    let bestOpp = -1;
    let tieCount = 0;

    for (let j = 0; j < opponents; j++) {
      const opp = [deck.pop(), deck.pop()];
      const score = evaluateHand(opp.concat(community));
      if (score > bestOpp) {
        bestOpp = score;
        tieCount = 1;
      } else if (score === bestOpp) {
        tieCount++;
      }
    }

    if (playerScore > bestOpp) wins++;
    else if (playerScore === bestOpp) ties++;
  }

  const winPct = (wins / total * 100).toFixed(1);
  const tiePct = (ties / total * 100).toFixed(1);
  const lossPct = (100 - winPct - tiePct).toFixed(1);

  oddsText.textContent = `Win: ${winPct}% | Tie: ${tiePct}% | Loss: ${lossPct}%`;
}
</script>
