<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Poker Hand Odds Calculator</title>
  <style>
    body { font-family: sans-serif; background: #222; color: white; padding: 2rem; }
    input, button { padding: 0.5rem; margin: 0.5rem; font-size: 1rem; }
    .result { margin-top: 1rem; }
  </style>
</head>
<body>

<h2>Poker Hand Odds Calculator (Texas Hold'em)</h2>

<label>Your Hand (e.g., Ah Kh):</label>
<input id="playerHand" placeholder="e.g. Ah Kh">
<br>
<label>Number of Opponents:</label>
<input id="numOpponents" type="number" min="1" max="8" value="2">
<br>
<button onclick="runSimulation()">Calculate Odds</button>

<div class="result" id="output"></div>

<script>
// Basic card rank and suits
const ranks = "23456789TJQKA".split("");
const suits = "cdhs".split("");

// Generate full deck
function getDeck() {
  const deck = [];
  for (let r of ranks) {
    for (let s of suits) {
      deck.push(r + s);
    }
  }
  return deck;
}

// Evaluate hand using simple scoring (better: use lib for high accuracy)
function evaluateHand(cards) {
  // simplified hand strength: sort by rank
  const strength = "23456789TJQKA";
  return cards.map(card => strength.indexOf(card[0])).sort((a, b) => b - a).join("");
}

// Shuffle array
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// Main simulation
function runSimulation() {
  const handStr = document.getElementById("playerHand").value.trim().toUpperCase();
  const playerCards = handStr.split(" ");
  const numOpponents = parseInt(document.getElementById("numOpponents").value);

  if (playerCards.length !== 2 || playerCards.some(c => c.length !== 2)) {
    document.getElementById("output").innerHTML = "Please enter 2 valid hole cards (e.g., Ah Kh)";
    return;
  }

  let wins = 0, ties = 0, total = 0;
  const simulations = 5000;

  for (let i = 0; i < simulations; i++) {
    let deck = getDeck();
    // Remove player's cards
    playerCards.forEach(c => deck.splice(deck.indexOf(c), 1));
    shuffle(deck);

    const opponents = [];
    for (let j = 0; j < numOpponents; j++) {
      opponents.push([deck.pop(), deck.pop()]);
    }

    const community = [deck.pop(), deck.pop(), deck.pop(), deck.pop(), deck.pop()];
    const playerFullHand = [...playerCards, ...community];
    const playerScore = evaluateHand(playerFullHand);

    const oppScores = opponents.map(opp => evaluateHand([...opp, ...community]));

    const bestOpponent = oppScores.reduce((a, b) => a > b ? a : b);
    if (playerScore > bestOpponent) wins++;
    else if (playerScore === bestOpponent) ties++;
    total++;
  }

  const output = `
    <p>Simulated ${total} hands vs ${numOpponents} opponent(s)</p>
    <ul>
      <li>Win: ${(100 * wins / total).toFixed(2)}%</li>
      <li>Tie: ${(100 * ties / total).toFixed(2)}%</li>
      <li>Loss: ${(100 * (total - wins - ties) / total).toFixed(2)}%</li>
    </ul>
  `;
  document.getElementById("output").innerHTML = output;
}
</script>

</body>
</html>
